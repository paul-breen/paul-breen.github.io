(function(c){var d="rose",e="0.1";var j={series:{rose:{active:false,show:false,roseSize:0.7,leafSize:0.7,dataMin:0,dataMax:100,drawGrid:{drawValue:true,drawLabel:true,labelPos:0.5,gridMode:"data"},highlight:{opacity:0.5},debug:{active:false,createDocuTemplate:null}}}};var g={grid:{show:false}};var a={series:{nearBy:{distance:6,findItem:null,findMode:"circle",drawEdit:null,drawHover:null}},grid:{ranges:5,font:"18px Times New Roman"}};function h(z){var m=null,k=null,t=null,A,E;var l,w,o,y,B,r;z.hooks.processOptions.push(D);z.hooks.processRawData.push(n);function D(G,F){if(F.series.rose.active===true){c.extend(true,F,g);c.plot.JUMlib.data.extendEmpty(F,a);k=F;G.hooks.drawSeries.push(p);G.hooks.draw.push(s);if(k.series.rose.debug.active===true){k.series.rose.debug.createDocuTemplate=C}}}function C(){var G,F;G=c.plot.JUMExample.docuObjectToTemplate([{name:"data",tree:t.data},{name:"options.series.rose",tree:j.series.rose,takeDefault:true},{name:"options.series.rose",tree:k.series.rose}],d);c.plot.JUMExample.extendDocuObject(G,d);F=c.plot.JUMExample.docuObjectToEdit(G,"");return{data:G,form:F}}function n(J,G,H,I){if(G.rose.show===true){var F=J.getCanvas();l=Math.min(F.width,F.height)/2*k.series.rose.roseSize;o=(F.height/2);w=o;r=b(k,G.data[0].length);G.nearBy.findItem=q;G.nearBy.drawHover=u;m=J.getPlotOffset();switch(k.series.rose.drawGrid.gridMode){case"data":y=360/G.data.length;break;case"ticks":y=360/k.grid.tickLabel.length;break}B=y*(1-k.series.rose.leafSize)/2}}function p(O,P,L){var H,M,K,N,I,G,F;if(L.rose.show){t=L;H=0;for(var J=0;J<L.data.length;J++){F=L.data[J];M=H+B;K=H+y-B;H+=y;if(F.length){N=x(F[0]);G={ctx:P,serie:L,serieIndex:J,colors:r,radius:N,left:w,top:o};I=f(G);v(P,F[1],F[2],N,I)}else{N=x(F);G={ctx:P,serie:L,serieIndex:J,colors:r,radius:N,left:w,top:o};I=f(G);v(P,M,K,N,I)}}}}function v(M,H,G,I,F){var N=2*Math.PI*H/360,L=2*Math.PI*G/360,K=w+Math.round(Math.cos(N)*I),J=o+Math.round(Math.sin(N)*I);M.strokeStyle=F;M.fillStyle=F;M.beginPath();M.moveTo(w,o);M.lineTo(K,J);M.arc(w,o,I,N,L);M.lineTo(w,o);M.closePath();M.fill()}function x(F){return(F-k.series.rose.dataMin)/(k.series.rose.dataMax-k.series.rose.dataMin)*l}function s(K,F){var L=0,G;A=F;E=K.getData();F.strokeStyle=k.grid.tickColor;F.fillStyle=k.grid.color;for(G=1;G<=k.grid.ranges;G++){H(F,G);if(k.series.rose.drawGrid.drawValue===true){M(F,G)}}for(G=0;G<k.grid.tickLabel.length;G++){J(F,L);I(F,L+y*t.rose.drawGrid.labelPos,k.grid.tickLabel[G]);L+=y}function H(O,P){var N;O.beginPath();O.moveTo(w,o);N=l/k.grid.ranges*P;O.arc(w,o,N,0,Math.PI*2);O.closePath();O.stroke()}function M(N,P){var O=k.series.rose.dataMin+(k.series.rose.dataMax-k.series.rose.dataMin)/k.grid.ranges*P;N.fillText(O,w+l/k.grid.ranges*P,o-1)}function J(O,Q){var P=2*Math.PI*Q/360,N=w+Math.round(Math.cos(P)*l),R=o+Math.round(Math.sin(P)*l);O.beginPath();O.moveTo(w,o);O.lineTo(N,R);O.closePath();O.stroke()}function I(O,S,P){O.font=k.grid.font;var R=2*Math.PI*S/360,N=w+Math.round(Math.cos(R)*l),T=o+Math.round(Math.sin(R)*l),Q=O.measureText(P);if(S<180){T+=10}if(i(S,90,270)){N-=Q.width}O.fillText(P,N,T)}}function q(H,F,G,I){return J(H,F,G,I);function J(N,L,Q,R){var U=null,M,S,P,O,K;M=0;for(P=0;P<R.data.length;P++){K=T(M,l);if(K===true){U=[Q,P];for(O=0;O<E.length;O++){S=x(E[O].data[P]);K=T(M,S);if(K===true){U=[O,P]}}return U}M+=y}function T(aa,W){var Z,Y,X,V,ab;A.save();A.beginPath();Y=2*Math.PI*aa/360;X=2*Math.PI*(aa+y)/360;V=w+Math.round(Math.cos(Y)*W);ab=o+Math.round(Math.sin(Y)*W);A.moveTo(w,o);A.lineTo(V,ab);A.arc(w,o,W,Y,X);A.closePath();Z=A.isPointInPath(N,L);A.restore();return Z}return U}}function u(I,G,F){var H=F*y;var J="rgba(255,255,255,"+G.rose.highlight.opacity+")";v(I,H,H+y,l,J)}}var i=c.plot.JUMlib.library.between;var b=c.plot.JUMlib.data.createColors;var f=c.plot.JUMlib.data.getColor;c.plot.plugins.push({init:h,options:j,name:d,version:e})})(jQuery);